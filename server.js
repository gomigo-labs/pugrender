const pug = require("pug");
const fs = require("fs");

//variables
let content,
  docName,
  dochtml,
  docUrl,
  apphtml,
  appLink,
  organization,
  organizationNo,
  organizationGSTIN,
  invoiceNumber,
  dueDate,
  lineItems,
  accountNumber,
  ifscCode,
  bankName,
  customerUpiId,
  taxableAmount,
  orderNo,
  billingAddressLine1,
  billingAddressLine2,
  shippingAddressLine1,
  shippingAddressLine2,
  billingState,
  shippingState,
  shippingZipCode,
  billingZipCode,
  description;

let invoiceJson = {
  addedOn: 1626171809083,
  additionalCharges: [
    {
      chargeAmount: "10056",
      chargeDescription: "freight charge",
    },
  ],
  amount: 1000,
  amountPaid: 0,
  contactPerson: {
    contactName: "customer contact person",
    contactPersonEmail: " ",
    contactPersonId: " ",
    contactPersonNumber: "5666004156",
  },
  currency: "INR",
  customerAddress: {
    billingAddress: {
      addressLine1: "ABC-14, Wazirpur Industrial Area, New Delhi",
      addressLine2: "",
      city: "New Delhi",
      country: "India",
      phoneNo: "454464",
      state: "Delhi",
      zipCode: "110069",
    },
    shippingAddress: {
      addressLine1: "ABC-14, Wazirpur Industrial Area, New Delhi",
      addressLine2: "",
      city: "New Delhi",
      country: "India",
      phoneNo: "454464",
      state: "Delhi",
      zipCode: "110069",
    },
  },
  customerEmail: " ",
  customerGSTIN: "27AAFCM0612E1ZZ",
  customerId: "e3721959",
  customerName: "test customer",
  customerNotes: "test",
  customerNumber: "456456465",
  customerUpiId: "test@icici",
  discount: {
    discountAmount: "100",
    discountDescription: "10%",
  },
  documents: [],
  dueDate: 1624655669000,
  invoiceBankDetails: {
    accountName: "String",
    accountNumber: "String",
    bankName: "String",
    ifscCode: "String",
  },
  invoiceDate: 1623655669000,
  invoiceId: "1c3cf5d9034960d1",
  invoiceLogo: {},
  invoiceNumber: "GOM1236",
  invoiceObject: {},
  invoiceSignature: {},
  invoiceStatus: "Unpaid",
  invoiceSubject: "invoice for paper products",
  isDraft: 0,
  isSent: 0,
  lineItems: [
    {
      batch: "b100",
      discount: 0,
      itemAmount: "118",
      itemCode: "15c150",
      itemDescription: "paper 200gsm",
      itemHsnOrSac: "00564",
      itemId: "15c150",
      itemName: "paper",
      itemPrice: "20",
      itemQty: 5,
      itemTax: 18,
      lineNumber: "1",
      taxableAmount: 100,
      uom: "EA",
    },
    {
      discount: 0,
      itemAmount: "100",
      itemCode: "8df675",
      itemDescription: "paper 200gsm",
      itemHsnOrSac: "00564",
      itemId: "8df675",
      itemName: "paper",
      itemPrice: "20",
      itemQty: 5,
      itemTax: 18,
      lineNumber: "2",
      serialNos: ["s01", "s02"],
      taxableAmount: 100,
      uom: "EA",
    },
  ],
  modifiedOn: 1626171809083,
  orderNo: "30056846",
  organizationGSTIN: "27AAACL1069K1ZC",
  paymentTerms: "NET 30",
  PK: "1c3cf5d9034960d1",
  SK: " ",
  taxableAmount: 900,
  tenantId: "skull-dev",
  termsAndConditions: "big ass terms and termsAndConditions",
  invoiceQr:
    "data:image/png;base64,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",
};

content = pug.renderFile("template.pug", {
  docUrl: docUrl,
  dochtml: dochtml,
  docName: docName,
  apphtml: apphtml,
  appLink: appLink,
  title: invoiceJson.invoiceNumber,
  description: "test",
  footer: "test",
  GSTIN: invoiceJson.customerGSTIN,
  organizationNo: invoiceJson.organizationNo,
  organizationGSTIN: invoiceJson.organizationGSTIN,
  invoiceNumber: invoiceJson.invoiceNumber,
  invoiceDate: invoiceJson.invoiceDate,
  dueDate: invoiceJson.dueDate,
  lineItems: invoiceJson.lineItems,
  accountNumber: invoiceJson.invoiceBankDetails.accountNumber,
  ifscCode: invoiceJson.invoiceBankDetails.ifscCode,
  bankName: invoiceJson.invoiceBankDetails.bankName,
  customerUpiId: invoiceJson.customerUpiId,
  taxableAmount: invoiceJson.taxableAmount,
  orderNo: invoiceJson.orderNo,
  billingAddressLine1: invoiceJson.customerAddress.billingAddress.addressLine1,
  billingAddressLine2: invoiceJson.customerAddress.billingAddress.addressLine2,
  shippingAddressLine1:
    invoiceJson.customerAddress.shippingAddress.addressLine1,
  shippingAddressLine2:
    invoiceJson.customerAddress.shippingAddress.addressLine2,
  shippingState: invoiceJson.customerAddress.shippingAddress.state,
  shippingZipCode: invoiceJson.customerAddress.shippingAddress.zipCode,
  billingState: invoiceJson.customerAddress.billingAddress.state,
  billingZipCode: invoiceJson.customerAddress.billingAddress.zipCode,
});

fs.writeFile("template_html.html", content, function (err, data) {
  if (err) {
    return console.log(err);
  }
  console.log("hello");
});
